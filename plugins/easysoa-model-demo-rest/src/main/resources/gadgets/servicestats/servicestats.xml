<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="__MSG_servicestats__" height="95" scrolling="true"
    scaling="true" directory_title="__MSG_servicestats__"
    description="__MSG_description__" author="EasySOA">

    <Locale messages="ALL_ALL.xml"/>
    <Locale lang="fr" messages="fr_ALL.xml"/>

    <Require feature="dynamic-height" />
    <Require feature="settitle" />
    <Require feature="opensocial-0.8" />
    <Require feature="nuxeo" />
    <Require feature="jquery" />
    <Require feature="form" />
  </ModulePrefs>


  <!--  XXX: Rest url hardcoded -->
  <Content type="html" view="default">
  <![CDATA[
  
    <script type="text/javascript" language="javascript" src="servicestats.js"></script>
    <script type="text/javascript">
      var prefs = new _IG_Prefs(__MODULE_ID__);
      gadgets.util.registerOnLoadHandler(function() {
        gadgetId = gadgets.nuxeo.getGadgetId();
        getDocumentLists();
        $.ajax({
            url: "http://localhost:8080/nuxeo/site/easysoa/stats"
            success: function(data) {
                render(data, $("#documentList"));
            }
          });
      });
    </script>

    <link rel="stylesheet" type="text/css" href="servicestats.css"/>
    <div id="documentList">
       <img src="${org.nuxeo.ecm.contextPath}/img/standart_waiter.gif">
    </div>

  ]]>
  </Content>
</Module>
