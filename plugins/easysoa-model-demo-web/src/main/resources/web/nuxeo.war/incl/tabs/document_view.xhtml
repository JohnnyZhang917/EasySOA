<div class="summary"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  xmlns:nxdir="http://nuxeo.org/nxdirectory"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  xmlns:nxu="http://nuxeo.org/nxweb/util">

  <h:form id="document_view">
    <a4j:region id="documentViewRegion">
      <a4j:outputPanel id="documentViewPanel">
      
	  <!-- EasySOA : Empty cache (XXX: Doesn't work) -->
	  <h:outputText value="#{relationActions.resetStatements()}" rendered="true"/>
  
  	  <!-- EasySOA : Discovery type icons -->
  	  <c:set var="dtbrowsing" value="${currentDocument.getProperty('soacommon', 'dtbrowsing')}" scope="view" />
  	  <c:set var="dtmonitoring" value="${currentDocument.getProperty('soacommon', 'dtmonitoring')}" scope="view" />
  	  <c:set var="dtimport" value="${currentDocument.getProperty('soacommon', 'dtimport')}" scope="view" />
	  <c:if test="${dtbrowsing != '' || dtmonitoring != '' || dtimport != ''}">
	     <div style="float: left; margin-top: 20px; margin-right: 50px">
		    <c:if test="${dtbrowsing != ''}">
	        	<img src="img/dtBrowsing.png" alt="- Notified by browsing" 
	        		style="margin-right: 10px" title="${dtbrowsing}" />
		  	</c:if>
		    <c:if test="${dtmonitoring != ''}">
	        	<img src="img/dtMonitoring.png" alt="- Notified by monitoring"
	        		style="margin-right: 10px" title="${dtmonitoring}" />
		  	</c:if>
		    <c:if test="${dtimport != ''}">
	        	<img src="img/dtImport.png" alt="- Notified by import" title="${dtimport}" />
		  	</c:if>
		 </div>
	  </c:if>
	  
	  <!-- EasySOA : Call it button -->
	  <c:if test="${currentDocument.getType() == 'Service'}">
	     <div style="float: left; margin-top: 20px">
	     <c:choose>
		 	  <c:when test="${currentDocument.getProperty('servicedef', 'lightUrl') != null}">
			      <a href="${currentDocument.getProperty('servicedef', 'lightUrl')}" target="_blank">
					<img src="img/callIt.png" 
						title="Call the service using EasySOA Light"
						alt="Call it!" />
				  </a>
			  </c:when>
			  <c:otherwise>
				  <img src="img/callItOff.png"
				  	title="Call the service using EasySOA Light (unavailable for this service)"
				  	alt="Call it! (Unavailable)" />
			  </c:otherwise>
		  </c:choose>
		  </div>
	  </c:if>
	  
	  <nxl:layout value="#{currentDocument}" mode="view" name="#{currentDocumentSummaryLayout}"/>

      </a4j:outputPanel>
    </a4j:region>
  </h:form>

</div>
