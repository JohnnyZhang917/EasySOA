<html xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<title>
					EasySOA Core -
					
					Service
				</title>
<link href="../style.css" rel="stylesheet">
</head>
<body>
<script type="text/javascript">
					function getElementsByClass(searchClass,node,tag) {
						var classElements = new Array();
						if ( node == null )
							node = document;
						if ( tag == null )
							tag = '*';
						var els = node.getElementsByTagName(tag);
						var elsLen = els.length;
						var pattern = new RegExp("(^|\\s)"+searchClass+"(\\s|$)");
						
						for (i = 0, j = 0; i < elsLen; i++) {
							if ( pattern.test(els[i].className) ) {
								classElements[j] = els[i];
								j++;
							}
						}
						
						return classElements;
					}
				</script>
<div id="headerLight">
<div id="headerLightContents">
<div id="headerBreadcrumbs">
<a href="../index.html">EasySOA</a>
							&gt;
							<a href="index.html">Light</a>
							&gt;
							<b></b>
</div>
<b></b>
						Service
					</div>
</div>
<div id="container">
<h1>Service location</h1>
<p>
<a href="http://localhost:8200/esb/AirportService">http://localhost:8200/esb/AirportService</a>
</p>
<h2>
				Binding
				<b>airportSoap</b>
</h2>
<h3>
				Operation
				<b>getAirportInformationByISOCountryCode</b>
</h3>
<script type="text/javascript">
				function submit_getAirportInformationByISOCountryCode_airportSoap_form(form){
					var xhr;
					var operation = "getAirportInformationByISOCountryCode";
					var binding = "airportSoap";
					var responseMessage = "getAirportInformationByISOCountryCodeResponse";
					getElementsByClass('outputField', document.getAirportInformationByISOCountryCode_airportSoap, '*')[0].value = "Sending request ...";
					if(window.XMLHttpRequest) // Firefox and others
						xhr = new XMLHttpRequest();
					else if(window.ActiveXObject){ // Internet Explorer
						try {
							xhr = new ActiveXObject("Msxml2.XMLHTTP");
						} catch (e) {
							xhr = new ActiveXObject("Microsoft.XMLHTTP");
						}
					}
					else { // XMLHttpRequest not supported by browser
						alert("Your browser does not support XMLHTTPRequest objects ...");
						xhr = false;
					}
					getElementsByClass('outputField', document.getAirportInformationByISOCountryCode_airportSoap, '*')[0].value = "Getting response ...";
					xhr.onreadystatechange = function(){
						//alert("xhr.readyState : " + xhr.readyState);
						if(xhr.readyState == 4){
							//alert("xhr.status : " + xhr.status + " ; xhr.responseText : " + xhr.responseText);
							if(xhr.status == 200){
								// receive now json structure
								//getElementsByClass('outputField', document.getAirportInformationByISOCountryCode_airportSoap, '*')[0].value = xhr.responseText;
								var responseData = JSON.parse(xhr.responseText);
								//for each elements 'outputField'
								var outputFields = getElementsByClass('outputField', document.getAirportInformationByISOCountryCode_airportSoap, '*');
								
								for(j=0; j<outputFields.length; j++){
									var fieldName = outputFields[j].name;
									outputFields[j].value = eval("responseData.Body." + responseMessage + "." + fieldName);
								}
								
							} else {
								getElementsByClass('outputField', document.getAirportInformationByISOCountryCode_airportSoap, '*')[0].value = "Error code " + xhr.status;
							}
						}
					};
					
					// Hard coded URL for demo purpose
					var url = "http://localhost:7001/";
					var wsdlUrl = "file:///data/home/jguillemotte/EasySOA-Workspace/easysoa/easysoa-proxy/easysoa-proxy-core/easysoa-proxy-core-scaffolderproxy/src/main/resources/defaultWsdl/server_airport_soap.wsdl";				
					var params = "";
					// For each form field : add it in the url
	    			
	    			for(i=0; i<document.forms[form].elements.length; i++){
						// on ne prend que les champs enabled ou en lecture / ecriture
						if(document.forms[form].elements[i].disabled == false){
							//alert("The field name is: " + document.forms[form].elements[i].name + " and itâ€™s value is: " + document.forms[form].elements[i].value + ".<br />");							
							if(params == ""){
								params = params + document.forms[form].elements[i].name + "=" + document.forms[form].elements[i].value;
							} else {
								params = params + "&" + document.forms[form].elements[i].name + "=" + document.forms[form].elements[i].value;							
							}
						}
					}
					params = params + "&wsdlUrl=" + wsdlUrl; 
					url = url + "callService/" + binding + "/" + operation + "/";
					
					//alert("url = " + url + "?" + params);
					xhr.open("GET", url + "?" + params, true);
					xhr.send(null);
				}
				
			</script>
<form enctype="text/plain" action="" method="get" name="getAirportInformationByISOCountryCode_airportSoap">
<h4>Input fields</h4>
<table>
<tr>
<th style="width: 20%">Field type</th><th style="width: 20%">Name</th><th>Value</th>
</tr>
<tr>
<td>xsd:string</td><td>CountryAbbrviation</td><td><input class="inputField" name="CountryAbbrviation" type="text"></td>
</tr>
</table>
<h4>Output fields</h4>
<table>
<tr>
<th style="width: 20%">Field type</th><th style="width: 20%">Name</th><th>Value</th>
</tr>
<tr>
<td>xsd:string</td><td>getAirportInformationByISOCountryCodeResult</td><td><input class="outputField" id="return_getAirportInformationByISOCountryCodeResult" disabled name="getAirportInformationByISOCountryCodeResult" type="text"></td>
</tr>
</table>
</form>
<br>
<input OnClick="submit_getAirportInformationByISOCountryCode_airportSoap_form('getAirportInformationByISOCountryCode_airportSoap');" value="Submit" type="button">
</div>
</body>
</html>
